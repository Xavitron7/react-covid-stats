{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","useState","country","confirmed","covidData","setCovidData","vaccineData","setVaccineData","listOfCountries","setListOfCountries","currentCountryCases","setCurrentCountryCases","currentVaccineCases","setCurrentVaccineCases","useEffect","a","fetch","mode","countryData","json","name","countryJSON","countryList","push","console","log","vaccineDownload","vaccineDataJSON","getAllCountries","getVaccineData","className","id","deaths","recovered","administered","people_vaccinated","people_partially_vaccinated","population","toFixed","capital_city","onSubmit","event","preventDefault","selectedCountry","document","querySelector","value","notFound","errorMessage","classList","remove","setTimeout","add","All","list","map","Math","random","type","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"6OAyHeA,MAvHf,WAEE,MAAkCC,mBAAS,CAACC,QAAS,OAAQC,UAAW,SAAxE,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAAsCJ,mBAAS,IAA/C,mBAAOK,EAAP,KAAoBC,EAApB,KACA,EAA8CN,mBAAS,IAAvD,mBAAOO,EAAP,KAAwBC,EAAxB,KACA,EAAsDR,mBAAS,IAA/D,mBAAOS,EAAP,KAA4BC,EAA5B,KACA,EAAsDV,mBAAS,IAA/D,mBAAOW,EAAP,KAA4BC,EAA5B,KAoEA,OAnCAC,qBAAU,WAAM,4CACd,kCAAAC,EAAA,sEAC4BC,MAAM,wDAAyD,CAACC,KAAK,SADjG,cACQC,EADR,gBAE4BA,EAAYC,OAFxC,OAKE,IAASC,KAHHC,EAFR,OAGChB,EAAagB,GACNC,EAAc,GACHD,EAAeC,EAAYC,KAAKH,GACjDX,EAAmBa,GACnBE,QAAQC,IAAI,kBAAmBrB,GAPjC,6CADc,kEAYd,8BAAAW,EAAA,sEACgCC,MAAM,4DADtC,cACQU,EADR,gBAEgCA,EAAgBP,OAFhD,OAEQQ,EAFR,OAGEpB,EAAeoB,GAHjB,4CAZc,uBAAC,WAAD,wBAkBdC,GAlBc,mCAmBdC,KAGC,IAcD,qBAAKC,UAAU,MAAf,SACE,sBAAKC,GAAG,YAAR,UACE,oBAAID,UAAU,QAAd,kCACA,sBAAKA,UAAU,UAAf,UACE,sBAAKA,UAAU,UAAf,UACA,iDACA,sBAAKA,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,uBAAzB,IAA+D,4BAAIpB,EAAoBR,aACvF,sBAAK4B,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,oBAAzB,IAA4D,4BAAIpB,EAAoBP,eACpF,sBAAK2B,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,sBAAzB,IAA8D,4BAAIpB,EAAoBsB,YACtF,sBAAKF,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,yBAAzB,IAAiE,4BAAIpB,EAAoBuB,kBAG3F,sBAAKH,UAAU,UAAf,UACE,wDACA,sBAAKA,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,qCAAzB,IAA6E,4BAAIlB,EAAoBsB,kBACrG,sBAAKJ,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,uCAAzB,IAA+E,4BAAIlB,EAAoBuB,uBACvG,sBAAKL,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,2CAAzB,IAAmF,4BAAIlB,EAAoBwB,iCAC3G,sBAAKN,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,sCAAzB,IAA8E,4BAAIlB,EAAoBwB,8BAAiCxB,EAAoBwB,4BAA8B1B,EAAoB2B,WAAc,KAAKC,QAAQ,QACxO,sBAAKR,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,kCAAzB,IAA0E,4BAAIlB,EAAoBuB,oBAAuBvB,EAAoBuB,kBAAoBzB,EAAoB2B,WAAc,KAAKC,QAAQ,WAElN,qDACA,sBAAKR,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,0BAAzB,IAAkE,4BAAIpB,EAAoB2B,gBAC1F,sBAAKP,UAAU,UAAf,UAAyB,mBAAGA,UAAU,WAAb,4BAAzB,IAAoE,4BAAIpB,EAAoB6B,qBAE9F,qBAAKR,GAAG,cAAR,SACE,sBAAMS,SA5FZ,SAAsBC,GACpBA,EAAMC,iBAGN,IAAMC,EAAkBC,SAASC,cAAc,iBAAiBC,MAGhE,SAASC,IACR,IAAMC,EAAeJ,SAASC,cAAc,iBAC5CG,EAAaC,UAAUC,OAAO,UAC9BC,YAAW,WAAOH,EAAaC,UAAUG,IAAI,YAAY,KALrDT,IAWLvC,EAAUuC,GAAmBhC,EAAuBP,EAAUuC,GAAiBU,KAAON,IACtFzC,EAAYqC,GAAmB9B,EAAuBP,EAAYqC,GAAiBU,KAAON,IAQ1FvB,QAAQC,IAAI,gBAAiBf,KAmEzB,SACE,sBAAKqB,GAAG,iBAAR,UAAyB,mCAAOA,GAAG,eAAeuB,KAAK,eAA9B,KAA+C,iBACxE,0BAAUvB,GAAG,cAAb,SACCvB,EAAgB+C,KAAI,SAAArD,GAAO,OAAI,wBAAQ4C,MAAO5C,GAA4B,IAAdsD,KAAKC,eAIlE,wBAAQC,KAAK,SAAb,2BAKJ,qBAAK3B,GAAG,eAAeD,UAAU,SAAjC,SAA0C,uECtGjC6B,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF1B,SAAS2B,eAAe,SAM1BZ,M","file":"static/js/main.32a4797f.chunk.js","sourcesContent":["import {useState, useEffect} from \"react\";\n\nfunction App() {\n\n  const [covidData, setCovidData] = useState({country: \"none\", confirmed: \"none\"});\n  const [vaccineData, setVaccineData] = useState({});\n  const [listOfCountries, setListOfCountries] = useState([]);\n  const [currentCountryCases, setCurrentCountryCases] = useState({});\n  const [currentVaccineCases, setCurrentVaccineCases] = useState({});\n \n  function handleSubmit(event) {\n    event.preventDefault();\n\n    //Set the current country to the one just selected\n    const selectedCountry = document.querySelector(\"#countryInput\").value;\n    if (!selectedCountry) {return} // if null return\n\n    function notFound() {\n     const errorMessage = document.querySelector(\"#errorMessage\");\n     errorMessage.classList.remove(\"hidden\");\n     setTimeout(() => {errorMessage.classList.add(\"hidden\")}, 3000)\n\n     \n\n    }\n    \n    covidData[selectedCountry] ? setCurrentCountryCases(covidData[selectedCountry].All) : notFound();\n    vaccineData[selectedCountry] ? setCurrentVaccineCases(vaccineData[selectedCountry].All) : notFound();\n\n\n    /*setCurrentCountryCases(covidData[selectedCountry].All);\n    setCurrentVaccineCases(vaccineData[selectedCountry].All);*/\n\n    \n    \n    console.log(\"new count obj\", currentCountryCases);\n   \n\n  }\n\n\n  useEffect(() => {\n    async function getAllCountries() {\n      const countryData = await fetch(\"https://covid-api.mmediagroup.fr/v1/cases?country=All\", {mode:\"cors\"});\n      const countryJSON = await countryData.json();  \n     setCovidData(countryJSON); //Country data already downloaded so might as well store it;\n      const countryList = [];\n      for (let name in countryJSON ) {countryList.push(name)};  \n      setListOfCountries(countryList);\n      console.log(\"this is line 34\", covidData)\n  \n    }\n\n    async function getVaccineData() {\n      const vaccineDownload = await fetch(\"https://covid-api.mmediagroup.fr/v1/vaccines?country=All\");\n      const vaccineDataJSON = await vaccineDownload.json()\n      setVaccineData(vaccineDataJSON);\n    }    \n\n    getAllCountries(); \n    getVaccineData();    \n  \n   \n  }, []);\n\n  \n\n \n\n\n\n//This is an inefficient way to do things. May be better downloading all case/vaccine data then updating DOM based on locally stored info. i.e., when the page loads, download all cases/vaccine data similar to the get all country function.\n\n//Done. I think I need a new affect with covid and vaccine data depenencies that captures the cases, death etc. numbers and stores them for use in the DOM. I think currently, the app is mounting before the covid data is available and not refreshing. Hope the React upload works.\n\n\n  return (\n    <div className=\"App\">\n      <div id=\"container\">\n        <h1 className=\"Title\">COVID-19 Stat Finder</h1>\n        <div className=\"AllData\">\n          <div className=\"StatBox\">\n          <h2>Case Statistics</h2>\n          <div className=\"DataBox\"><p className=\"Category\">Country: </p> <p>{currentCountryCases.country}</p></div>\n          <div className=\"DataBox\"><p className=\"Category\">Cases:</p> <p>{currentCountryCases.confirmed}</p></div>\n          <div className=\"DataBox\"><p className=\"Category\">Deaths: </p> <p>{currentCountryCases.deaths}</p></div>\n          <div className=\"DataBox\"><p className=\"Category\">Recovered: </p> <p>{currentCountryCases.recovered}</p></div>\n          </div>\n\n        <div className=\"StatBox\">\n          <h2>Vaccination Statistics</h2> \n          <div className=\"DataBox\"><p className=\"Category\">Vaccines Administered: </p> <p>{currentVaccineCases.administered}</p></div>\n          <div className=\"DataBox\"><p className=\"Category\">People Fully Vaccinated: </p> <p>{currentVaccineCases.people_vaccinated}</p></div>\n          <div className=\"DataBox\"><p className=\"Category\">People Partially Vaccinated: </p> <p>{currentVaccineCases.people_partially_vaccinated}</p></div>\n          <div className=\"DataBox\"><p className=\"Category\">Partially Vaccinated %: </p> <p>{currentVaccineCases.people_partially_vaccinated && ((currentVaccineCases.people_partially_vaccinated / currentCountryCases.population) * 100).toFixed(2)}</p></div>\n          <div className=\"DataBox\"><p className=\"Category\">Fully Vaccinated %: </p> <p>{currentVaccineCases.people_vaccinated && ((currentVaccineCases.people_vaccinated / currentCountryCases.population) * 100).toFixed(2)}</p></div>\n        </div>\n        <h2>General Information</h2>\n        <div className=\"DataBox\"><p className=\"Category\">Population: </p> <p>{currentCountryCases.population}</p></div>  \n        <div className=\"DataBox\"><p className=\"Category\">Capital City: </p> <p>{currentCountryCases.capital_city}</p></div>\n      </div>\n      <div id=\"formSection\">\n        <form onSubmit={handleSubmit}>\n          <div id=\"inputContainer\"><input id=\"countryInput\" list=\"countryList\" id=\"countryInput\"/>\n          <datalist id=\"countryList\"> \n          {listOfCountries.map(country => <option value={country} key={Math.random()*100000}/>)}\n          \n          </datalist>\n     \n          <button type=\"submit\">Submit</button>\n          </div>\n        </form>\n      </div>\n\n      <div id=\"errorMessage\" className=\"hidden\"><p>No covid / vaccine data found.</p></div>\n\n    </div>\n    </div>\n  );\n}\n\nexport default App;\n\n/*Previous issue with the DOM not updating was caused by the submit event, not the useEffect hook. \n\nThe submit event changed the country but nothing else. Using the covidData object (that contained cases for every country) wasn't working. \n\nRefactored the submit handler so that on submission, it updates a country specific piece of state (currentCountryCases and currentVaccineCases) and based what was displayed in the DOM on those new pieces of state, instead of the covidData / vaccineData state. The latter were no longer being updated, so there was previously no trigger to re-render the DOM.*/\n\n/*\n\nAt first, app was making a new call to the API on every submit event. Changed this so that there was a single API call after the page mounts. UseEffect and an empty dependency array used because other methods (not using a hook, no dependencies...) seemed to result in hundreds of API calls. Possibly because of the datalist generation.\n\nIt then looked as though the DOM wasn't being updated on submit. I added some default data to state and noticed that the data was initially loaded, before being removed. This indicated that the state was being read, then overwritten after the covidData state was updated after the API call, but not updated afterwards. Button created to log state to console demonstrated that the API state was indeed stored in state, but not being accessed in a way that triggered a DOM refresh.\n\nI decided to create separate, individual country case/vaccine state objects that would be updated on refresh and trigger a DOM update.\n\n\n*/","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}